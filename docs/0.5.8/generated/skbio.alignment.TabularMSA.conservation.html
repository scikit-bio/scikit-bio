<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>skbio.alignment.TabularMSA.conservation &#8212; scikit-bio 0.5.8 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/style.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/copybutton.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="skbio.alignment.TabularMSA.extend" href="skbio.alignment.TabularMSA.extend.html" />
    <link rel="prev" title="skbio.alignment.TabularMSA.consensus" href="skbio.alignment.TabularMSA.consensus.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../_static/js/jquery-1.12.4.min.js"></script>
<script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
<script type="text/javascript" src="../_static/bootstrap-3.4.1/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>

  </head><body>
  
  <a href="https://github.com/biocore/scikit-bio"
     class="visible-desktop hidden-xs"><img
    id="gh-banner"
    style="position: absolute; top: 50px; right: 0; border: 0;"
    src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"
    alt="Fork me on GitHub"></a>
  <script>
    // Adjust banner height.
    $(function () {
      var navHeight = $(".navbar .container").css("height");
      $("#gh-banner").css("top", navHeight);
    });
  </script>


  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          scikit-bio docs</a>
        <span class="navbar-text navbar-version pull-left"><b>0.5.8</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../io.html">File I/O (<code class="xref py py-mod docutils literal notranslate"><span class="pre">skbio.io</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sequence.html">Sequences (<code class="xref py py-mod docutils literal notranslate"><span class="pre">skbio.sequence</span></code>)</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../alignment.html">Alignments (<code class="xref py py-mod docutils literal notranslate"><span class="pre">skbio.alignment</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tree.html">Tree representations (<code class="xref py py-mod docutils literal notranslate"><span class="pre">skbio.tree</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workflow.html">Constructing workflows (<code class="xref py py-mod docutils literal notranslate"><span class="pre">skbio.workflow</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../diversity.html">Diversity calculations (<code class="xref py py-mod docutils literal notranslate"><span class="pre">skbio.diversity</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../stats.html">Statistics (<code class="xref py py-mod docutils literal notranslate"><span class="pre">skbio.stats</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../metadata.html">Metadata (<code class="xref py py-mod docutils literal notranslate"><span class="pre">skbio.metadata</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../util.html">Utility functionality (<code class="xref py py-mod docutils literal notranslate"><span class="pre">skbio.util</span></code>)</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user/api_stability.html">API Stability</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../development/coding_guidelines.html">Coding guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/new_module.html">Adding a new module to skbio</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">skbio.alignment.TabularMSA.conservation</a><ul>
<li><a class="reference internal" href="#skbio.alignment.TabularMSA.conservation"><code class="docutils literal notranslate"><span class="pre">TabularMSA.conservation()</span></code></a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <section id="skbio-alignment-tabularmsa-conservation">
<h1>skbio.alignment.TabularMSA.conservation<a class="headerlink" href="#skbio-alignment-tabularmsa-conservation" title="Permalink to this heading">¶</a></h1>
<dl class="py method">
<dt class="sig sig-object py" id="skbio.alignment.TabularMSA.conservation">
<span class="sig-prename descclassname"><span class="pre">TabularMSA.</span></span><span class="sig-name descname"><span class="pre">conservation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">metric</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'inverse_shannon_uncertainty'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">degenerate_mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'error'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gap_mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'nan'</span></span></em><span class="sig-paren">)</span><a class="reference external" href="http://github.com/biocore/scikit-bio/blob/0.5.8/skbio/alignment/_tabular_msa.py#L1437"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#skbio.alignment.TabularMSA.conservation" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply metric to compute conservation for all alignment positions</p>
<p>State: Experimental as of 0.4.1.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>metric</strong> (<em>{'inverse_shannon_uncertainty'}</em><em>, </em><em>optional</em>) – Metric that should be applied for computing conservation. Resulting
values should be larger when a position is more conserved.</p></li>
<li><p><strong>degenerate_mode</strong> (<em>{'nan'</em><em>, </em><em>'error'}</em><em>, </em><em>optional</em>) – Mode for handling positions with degenerate characters. If
<code class="docutils literal notranslate"><span class="pre">&quot;nan&quot;</span></code>, positions with degenerate characters will be assigned a
conservation score of <code class="docutils literal notranslate"><span class="pre">np.nan</span></code>. If <code class="docutils literal notranslate"><span class="pre">&quot;error&quot;</span></code>, an
error will be raised if one or more degenerate characters are
present.</p></li>
<li><p><strong>gap_mode</strong> (<em>{'nan'</em><em>, </em><em>'ignore'</em><em>, </em><em>'error'</em><em>, </em><em>'include'}</em><em>, </em><em>optional</em>) – Mode for handling positions with gap characters. If <code class="docutils literal notranslate"><span class="pre">&quot;nan&quot;</span></code>,
positions with gaps will be assigned a conservation score of
<code class="docutils literal notranslate"><span class="pre">np.nan</span></code>. If <code class="docutils literal notranslate"><span class="pre">&quot;ignore&quot;</span></code>, positions with gaps will be filtered
to remove gaps before <code class="docutils literal notranslate"><span class="pre">metric</span></code> is applied. If <code class="docutils literal notranslate"><span class="pre">&quot;error&quot;</span></code>, an
error will be raised if one or more gap characters are present. If
<code class="docutils literal notranslate"><span class="pre">&quot;include&quot;</span></code>, conservation will be computed on alignment positions
with gaps included. In this case, it is up to the metric to ensure
that gaps are handled as they should be or to raise an error if
gaps are not supported by that metric.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Values resulting from the application of <code class="docutils literal notranslate"><span class="pre">metric</span></code> to each
position in the alignment.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>np.array of floats</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/dev/library/exceptions.html#ValueError" title="(in Python v3.12)"><strong>ValueError</strong></a> – If an unknown <code class="docutils literal notranslate"><span class="pre">metric</span></code>, <code class="docutils literal notranslate"><span class="pre">degenerate_mode</span></code> or <code class="docutils literal notranslate"><span class="pre">gap_mode</span></code> is
    provided.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/dev/library/exceptions.html#ValueError" title="(in Python v3.12)"><strong>ValueError</strong></a> – If any degenerate characters are present in the alignment when
    <code class="docutils literal notranslate"><span class="pre">degenerate_mode</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;error&quot;</span></code>.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/dev/library/exceptions.html#ValueError" title="(in Python v3.12)"><strong>ValueError</strong></a> – If any gaps are present in the alignment when <code class="docutils literal notranslate"><span class="pre">gap_mode</span></code> is
    <code class="docutils literal notranslate"><span class="pre">&quot;error&quot;</span></code>.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Users should be careful interpreting results when
<code class="docutils literal notranslate"><span class="pre">gap_mode</span> <span class="pre">=</span> <span class="pre">&quot;include&quot;</span></code> as the results may be misleading. For example,
as pointed out in <a class="footnote-reference brackets" href="#id4" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>, a protein alignment position composed of 90%
gaps and 10% tryptophans would score as more highly conserved than a
position composed of alanine and glycine in equal frequencies with the
<code class="docutils literal notranslate"><span class="pre">&quot;inverse_shannon_uncertainty&quot;</span></code> metric.</p>
<p><code class="docutils literal notranslate"><span class="pre">gap_mode</span> <span class="pre">=</span> <span class="pre">&quot;include&quot;</span></code> will result in all gap characters being
recoded to <code class="docutils literal notranslate"><span class="pre">TabularMSA.dtype.default_gap_char</span></code>. Because no
conservation metrics that we are aware of consider different gap
characters differently (e.g., none of the metrics described in <a class="footnote-reference brackets" href="#id4" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>),
they are all treated the same within this method.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">inverse_shannon_uncertainty</span></code> metric is simply one minus
Shannon’s uncertainty metric. This method uses the inverse of Shannon’s
uncertainty so that larger values imply higher conservation. Shannon’s
uncertainty is also referred to as Shannon’s entropy, but when making
computations from symbols, as is done here, “uncertainty” is the
preferred term (<a class="footnote-reference brackets" href="#id5" id="id3" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a>).</p>
<p class="rubric">References</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id4" role="note">
<span class="label"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></span>
<span class="backrefs">(<a role="doc-backlink" href="#id1">1</a>,<a role="doc-backlink" href="#id2">2</a>)</span>
<p>Valdar WS. Scoring residue conservation. Proteins. (2002)</p>
</aside>
<aside class="footnote brackets" id="id5" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id3">2</a><span class="fn-bracket">]</span></span>
<p>Schneider T. Pitfalls in information theory (website, ca. 2015).
<a class="reference external" href="https://schneider.ncifcrf.gov/glossary.html#Shannon_entropy">https://schneider.ncifcrf.gov/glossary.html#Shannon_entropy</a></p>
</aside>
</aside>
</dd></dl>

</section>


    </div>
      
  </div>
</div>
  
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2014--, scikit-bio development team.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 5.3.0.<br/>
    </p>
  </div>
</footer>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-6636235-9', 'scikit-bio.org');
    ga('send', 'pageview');
  </script>

  </body>
</html>