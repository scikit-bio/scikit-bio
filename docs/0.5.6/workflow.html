<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Constructing workflows (skbio.workflow) &#8212; scikit-bio 0.5.6 documentation</title>
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/style.css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script src="_static/copybutton.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="skbio.workflow.Workflow" href="generated/skbio.workflow.Workflow.html" />
    <link rel="prev" title="skbio.tree.NoParentError" href="generated/skbio.tree.NoParentError.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="_static/bootstrap-sphinx.js "></script>

  </head><body>
  
  <a href="https://github.com/biocore/scikit-bio"
     class="visible-desktop hidden-xs"><img
    id="gh-banner"
    style="position: absolute; top: 50px; right: 0; border: 0;"
    src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"
    alt="Fork me on GitHub"></a>
  <script>
    // Adjust banner height.
    $(function () {
      var navHeight = $(".navbar .container").css("height");
      $("#gh-banner").css("top", navHeight);
    });
  </script>


  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          scikit-bio docs</a>
        <span class="navbar-text navbar-version pull-left"><b>0.5.6</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="io.html">File I/O (<code class="xref py py-mod docutils literal notranslate"><span class="pre">skbio.io</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="sequence.html">Sequences (<code class="xref py py-mod docutils literal notranslate"><span class="pre">skbio.sequence</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="alignment.html">Alignments (<code class="xref py py-mod docutils literal notranslate"><span class="pre">skbio.alignment</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="tree.html">Tree representations (<code class="xref py py-mod docutils literal notranslate"><span class="pre">skbio.tree</span></code>)</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Constructing workflows (<code class="xref py py-mod docutils literal notranslate"><span class="pre">skbio.workflow</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="diversity.html">Diversity calculations (<code class="xref py py-mod docutils literal notranslate"><span class="pre">skbio.diversity</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="stats.html">Statistics (<code class="xref py py-mod docutils literal notranslate"><span class="pre">skbio.stats</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="metadata.html">Metadata (<code class="xref py py-mod docutils literal notranslate"><span class="pre">skbio.metadata</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="util.html">Utility functionality (<code class="xref py py-mod docutils literal notranslate"><span class="pre">skbio.util</span></code>)</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="user/api_stability.html">API Stability</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="development/coding_guidelines.html">Coding guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="development/new_module.html">Adding a new module to skbio</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Constructing workflows (<code class="xref py py-mod docutils literal notranslate"><span class="pre">skbio.workflow</span></code>)</a><ul>
<li><a class="reference internal" href="#classes">Classes</a></li>
<li><a class="reference internal" href="#decorators">Decorators</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <span class="target" id="module-skbio.workflow"></span><div class="section" id="constructing-workflows-skbio-workflow">
<h1>Constructing workflows (<a class="reference internal" href="#module-skbio.workflow" title="skbio.workflow"><code class="xref py py-mod docutils literal notranslate"><span class="pre">skbio.workflow</span></code></a>)<a class="headerlink" href="#constructing-workflows-skbio-workflow" title="Permalink to this headline">¶</a></h1>
<p>Construct arbitrarily complex workflows in which the specific methods run are
determined at runtime. This module supports short circuiting a workflow if an
item fails, supports ordering methods, callbacks for processed items, and
deciding what methods are executed based on state or runtime options.</p>
<div class="section" id="classes">
<h2>Classes<a class="headerlink" href="#classes" title="Permalink to this headline">¶</a></h2>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="generated/skbio.workflow.Workflow.html#skbio.workflow.Workflow" title="skbio.workflow.Workflow"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Workflow</span></code></a>(state[, short_circuit, debug, options])</p></td>
<td><p>Arbitrary workflow support structure</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="decorators">
<h2>Decorators<a class="headerlink" href="#decorators" title="Permalink to this headline">¶</a></h2>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="generated/skbio.workflow.requires.html#skbio.workflow.requires" title="skbio.workflow.requires"><code class="xref py py-obj docutils literal notranslate"><span class="pre">requires</span></code></a>([option, values, state])</p></td>
<td><p>Decorator that executes a function if requirements are met</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="generated/skbio.workflow.method.html#skbio.workflow.method" title="skbio.workflow.method"><code class="xref py py-obj docutils literal notranslate"><span class="pre">method</span></code></a>([priority])</p></td>
<td><p>Decorate a function to indicate it is a workflow method</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">skbio.workflow</span> <span class="kn">import</span> <span class="n">Workflow</span>
</pre></div>
</div>
<p>As an example of the <code class="docutils literal notranslate"><span class="pre">Workflow</span></code> object, let’s construct a sequence processor
that will filter sequences that are &lt; 10 nucleotides, reverse the sequence
if the runtime options indicate to, and truncate if a specific nucleotide
pattern is observed. The <code class="docutils literal notranslate"><span class="pre">Workflow</span></code> object will only short circuit, and
evaluate requirements on methods decorated by <code class="docutils literal notranslate"><span class="pre">method</span></code>. Developers are free
to define as many methods as they’d like within the object definition, and
which can be called from workflow methods, but they will not be subjected
directly to workflow checks.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">nuc_pattern</span> <span class="o">=</span> <span class="s1">&#39;AATTG&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">has_nuc_pattern</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="p">[:</span><span class="nb">len</span><span class="p">(</span><span class="n">nuc_pattern</span><span class="p">)]</span> <span class="o">==</span> <span class="n">nuc_pattern</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">SequenceProcessor</span><span class="p">(</span><span class="n">Workflow</span><span class="p">):</span>
<span class="gp">... </span>   <span class="k">def</span> <span class="nf">initialize_state</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
<span class="gp">... </span>       <span class="c1"># Setup the state for a new item (e.g., a new sequence)</span>
<span class="gp">... </span>       <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">item</span>
<span class="gp">... </span>   <span class="nd">@method</span><span class="p">(</span><span class="n">priority</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">... </span>   <span class="k">def</span> <span class="nf">check_length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>       <span class="c1"># Always make sure the sequence is at least 10 nucleotides</span>
<span class="gp">... </span>       <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
<span class="gp">... </span>           <span class="bp">self</span><span class="o">.</span><span class="n">failed</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">... </span>   <span class="nd">@method</span><span class="p">(</span><span class="n">priority</span><span class="o">=</span><span class="mi">90</span><span class="p">)</span>
<span class="gp">... </span>   <span class="nd">@requires</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="n">has_nuc_pattern</span><span class="p">)</span>
<span class="gp">... </span>   <span class="k">def</span> <span class="nf">truncate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>       <span class="c1"># Truncate if a specific starting nucleotide pattern is observed</span>
<span class="gp">... </span>       <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">nuc_pattern</span><span class="p">):]</span>
<span class="gp">... </span>   <span class="nd">@method</span><span class="p">(</span><span class="n">priority</span><span class="o">=</span><span class="mi">80</span><span class="p">)</span>
<span class="gp">... </span>   <span class="nd">@requires</span><span class="p">(</span><span class="n">option</span><span class="o">=</span><span class="s1">&#39;reverse&#39;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">... </span>   <span class="k">def</span> <span class="nf">reverse</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>       <span class="c1"># Reverse the sequence if indicatd at runtime</span>
<span class="gp">... </span>       <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
<p>An instance of a <code class="docutils literal notranslate"><span class="pre">Workflow</span></code> must be passed a <code class="docutils literal notranslate"><span class="pre">state</span></code> object and any runtime
options. There are a few other useful parameters that can be specfied but are
out of scope for the purposes of this example. We also do not need to provide
a state object as our <code class="docutils literal notranslate"><span class="pre">initialize_state</span></code> method overrides <code class="docutils literal notranslate"><span class="pre">self.state</span></code>.
Now, let’s create the instance.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">wf</span> <span class="o">=</span> <span class="n">SequenceProcessor</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;reverse=&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">})</span>
</pre></div>
</div>
<p>To run items through the <code class="docutils literal notranslate"><span class="pre">SequenceProcessor</span></code>, we need to pass in an
iterable. So, lets create a <code class="docutils literal notranslate"><span class="pre">list</span></code> of sequences.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">seqs</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;AAAAAAATTTTTTT&#39;</span><span class="p">,</span> <span class="s1">&#39;ATAGACC&#39;</span><span class="p">,</span> <span class="s1">&#39;AATTGCCGGAC&#39;</span><span class="p">,</span> <span class="s1">&#39;ATATGAACAAA&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>Before we run these sequences through, we’re going to also define callbacks
that are applied to the result of an single pass through the <code class="docutils literal notranslate"><span class="pre">Workflow</span></code>.
Callbacks are optional – by default, a success will simply yield the state
member variable while failures are ignored – but, depending on your workflow,
it can be useful to handle failures or potentially do something fun and
exciting on success.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">success_f</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="s2">&quot;SUCCESS: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">obj</span><span class="o">.</span><span class="n">state</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">fail_f</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="s2">&quot;FAIL: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">obj</span><span class="o">.</span><span class="n">state</span>
</pre></div>
</div>
<p>Now, lets process some data!</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">wf</span><span class="p">(</span><span class="n">seqs</span><span class="p">,</span> <span class="n">success_callback</span><span class="o">=</span><span class="n">success_f</span><span class="p">,</span> <span class="n">fail_callback</span><span class="o">=</span><span class="n">fail_f</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="go">SUCCESS: AAAAAAATTTTTTT</span>
<span class="go">FAIL: ATAGACC</span>
<span class="go">SUCCESS: CCGGAC</span>
<span class="go">SUCCESS: ATATGAACAAA</span>
</pre></div>
</div>
<p>A few things of note just happened. First off, none of the sequences were
reversed as the <code class="docutils literal notranslate"><span class="pre">SequenceProcessor</span></code> did not have option “reverse”
set to <code class="docutils literal notranslate"><span class="pre">True</span></code>. Second, you’ll notice that the 3rd sequence was truncated,
which is expected as it matched our nucleotide pattern of interest. Finally,
of the sequences we processed, only a single sequence failed.</p>
<p>To assist in constructing workflows, debug information is available but it
must be turned on at instantiation. Let’s do that, and while we’re at it, let’s
go ahead and enable the reversal method. This time through though, were going
to walk through an item at a time so we can examine the debug information.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">wf</span> <span class="o">=</span> <span class="n">SequenceProcessor</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;reverse&#39;</span><span class="p">:</span><span class="kc">True</span><span class="p">},</span> <span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gen</span> <span class="o">=</span> <span class="n">wf</span><span class="p">(</span><span class="n">seqs</span><span class="p">,</span> <span class="n">fail_callback</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">state</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">next</span><span class="p">(</span><span class="n">gen</span><span class="p">)</span>
<span class="go">&#39;TTTTTTTAAAAAAA&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wf</span><span class="o">.</span><span class="n">failed</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">wf</span><span class="o">.</span><span class="n">debug_trace</span><span class="p">)</span>
<span class="go">[(&#39;check_length&#39;, 0), (&#39;reverse&#39;, 2)]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">debug_trace</span></code> specifies the methods executed, and the order of their
execution where closer to zero indicates earlier in the execution order. Gaps
indicate there was a method evaluated but not executed. Each of the items in
the <code class="docutils literal notranslate"><span class="pre">debug_trace</span></code> is a key into a few other <code class="docutils literal notranslate"><span class="pre">dict</span></code> of debug information
which we’ll discuss in a moment. Did you see that the sequence was reversed
this time through the workflow?</p>
<p>Now, let’s take a look at the next item, which on our prior run through the
workflow was a failed item.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">next</span><span class="p">(</span><span class="n">gen</span><span class="p">)</span>
<span class="go">&#39;ATAGACC&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wf</span><span class="o">.</span><span class="n">failed</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">wf</span><span class="o">.</span><span class="n">debug_trace</span><span class="p">)</span>
<span class="go">[(&#39;check_length&#39;, 0)]</span>
</pre></div>
</div>
<p>What we can see is that the failed sequence only executed the check_length
method. Since the sequence didn’t pass our length filter of 10 nucleotides,
it was marked as failed within the <code class="docutils literal notranslate"><span class="pre">check_length</span></code> method. As a result, none
of the other methods were evaluated (note: this short circuiting behavior can
be disabled if desired).</p>
<p>This third item previously matched our nucleotide pattern of interest for
truncation. Let’s see what that looks like in the debug output.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">next</span><span class="p">(</span><span class="n">gen</span><span class="p">)</span>
<span class="go">&#39;CAGGCC&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wf</span><span class="o">.</span><span class="n">failed</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">wf</span><span class="o">.</span><span class="n">debug_trace</span><span class="p">)</span>
<span class="go">[(&#39;check_length&#39;, 0), (&#39;reverse&#39;, 2), (&#39;truncate&#39;, 1)]</span>
</pre></div>
</div>
<p>In this last example, we can see that the <code class="docutils literal notranslate"><span class="pre">truncate</span></code> method was executed
prior to the <code class="docutils literal notranslate"><span class="pre">reverse</span></code> method and following the <code class="docutils literal notranslate"><span class="pre">check_length</span></code> method. This
is as anticipated given the priorities we specified for these methods. Since
the <code class="docutils literal notranslate"><span class="pre">truncate</span></code> method is doing something interesting, let’s take a closer
look at how the <code class="docutils literal notranslate"><span class="pre">state</span></code> is changing. First, we’re going to dump out the
state of the workflow prior to the call to <code class="docutils literal notranslate"><span class="pre">truncate</span></code> and then we’re going
to dump out the <code class="docutils literal notranslate"><span class="pre">state</span></code> following the call to <code class="docutils literal notranslate"><span class="pre">truncate</span></code>, which will allow
us to rapidly what is going on.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">wf</span><span class="o">.</span><span class="n">debug_pre_state</span><span class="p">[(</span><span class="s1">&#39;truncate&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]</span>
<span class="go">&#39;AATTGCCGGAC&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wf</span><span class="o">.</span><span class="n">debug_post_state</span><span class="p">[(</span><span class="s1">&#39;truncate&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]</span>
<span class="go">&#39;CCGGAC&#39;</span>
</pre></div>
</div>
<p>As we expect, we have our original sequence going into <code class="docutils literal notranslate"><span class="pre">truncate</span></code>, and
following the application of <code class="docutils literal notranslate"><span class="pre">truncate</span></code>, our sequence is missing our
nucleotide pattern of interest. Awesome, right?</p>
<p>There is one final piece of debug output, <code class="docutils literal notranslate"><span class="pre">wf.debug_runtime</span></code>, which can
be useful when diagnosing the amount of time required for individual methods
on a particular piece of state (as opposed to the aggregate as provided by
cProfile).</p>
<p>Three final components of the workflow that are quite handy are objects that
allow you to indicate <code class="docutils literal notranslate"><span class="pre">anything</span></code> as an option value, anything that is
<code class="docutils literal notranslate"><span class="pre">not_none</span></code>, and a mechanism to define a range of valid values.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">skbio.workflow</span> <span class="kn">import</span> <span class="n">not_none</span><span class="p">,</span> <span class="n">anything</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Ex</span><span class="p">(</span><span class="n">Workflow</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nd">@method</span><span class="p">()</span>
<span class="gp">... </span>    <span class="nd">@requires</span><span class="p">(</span><span class="n">option</span><span class="o">=</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="n">not_none</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">do_something</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">pass</span>
<span class="gp">... </span>    <span class="nd">@method</span><span class="p">()</span>
<span class="gp">... </span>    <span class="nd">@requires</span><span class="p">(</span><span class="n">option</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="n">anything</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">do_something_else</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">pass</span>
<span class="gp">... </span>    <span class="nd">@method</span><span class="p">()</span>
<span class="gp">... </span>    <span class="nd">@requires</span><span class="p">(</span><span class="n">option</span><span class="o">=</span><span class="s1">&#39;foobar&#39;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">do_something_awesome</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">pass</span>
<span class="gp">...</span>
</pre></div>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
  
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2014--, scikit-bio development team.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.4.2.<br/>
    </p>
  </div>
</footer>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-6636235-9', 'scikit-bio.org');
    ga('send', 'pageview');
  </script>

  </body>
</html>