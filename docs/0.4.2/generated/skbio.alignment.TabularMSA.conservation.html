<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>skbio.alignment.TabularMSA.conservation &mdash; scikit-bio 0.4.2 documentation</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootswatch-3.3.4/united/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.4.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.4/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="scikit-bio 0.4.2 documentation" href="../index.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body role="document">
  
  <a href="https://github.com/biocore/scikit-bio"
     class="visible-desktop hidden-xs"><img
    id="gh-banner"
    style="position: absolute; top: 50px; right: 0; border: 0;"
    src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"
    alt="Fork me on GitHub"></a>
  <script>
    // Adjust banner height.
    $(function () {
      var navHeight = $(".navbar .container").css("height");
      $("#gh-banner").css("top", navHeight);
    });
  </script>


  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          scikit-bio docs</a>
        <span class="navbar-text navbar-version pull-left"><b>0.4.2</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../io.html">File I/O (<code class="docutils literal"><span class="pre">skbio.io</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sequence.html">Sequences (<code class="docutils literal"><span class="pre">skbio.sequence</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../alignment.html">Alignments (<code class="docutils literal"><span class="pre">skbio.alignment</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tree.html">Tree representations (<code class="docutils literal"><span class="pre">skbio.tree</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workflow.html">Constructing workflows (<code class="docutils literal"><span class="pre">skbio.workflow</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../diversity.html">Diversity calculations (<code class="docutils literal"><span class="pre">skbio.diversity</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../stats.html">Statistics (<code class="docutils literal"><span class="pre">skbio.stats</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../util.html">Utility functionality (<code class="docutils literal"><span class="pre">skbio.util</span></code>)</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user/api_stability.html">API Stability</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../development/py3.html">Supporting Python 2 and Python 3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/coding_guidelines.html">Coding guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/new_module.html">Adding a new module to skbio</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">skbio.alignment.TabularMSA.conservation</a></li>
</ul>
</ul>
</li>
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="skbio-alignment-tabularmsa-conservation">
<h1>skbio.alignment.TabularMSA.conservation<a class="headerlink" href="#skbio-alignment-tabularmsa-conservation" title="Permalink to this headline">¶</a></h1>
<dl class="method">
<dt id="skbio.alignment.TabularMSA.conservation">
<code class="descclassname">TabularMSA.</code><code class="descname">conservation</code><span class="sig-paren">(</span><em>metric='inverse_shannon_uncertainty'</em>, <em>degenerate_mode='error'</em>, <em>gap_mode='nan'</em><span class="sig-paren">)</span><a class="reference external" href="http://github.com/biocore/scikit-bio/blob/0.4.2/skbio/alignment/_tabular_msa.py#L1409"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#skbio.alignment.TabularMSA.conservation" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply metric to compute conservation for all alignment positions</p>
<p>State: Experimental as of 0.4.1.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>metric</strong> : {&#8216;inverse_shannon_uncertainty&#8217;}, optional</p>
<blockquote>
<div><p>Metric that should be applied for computing conservation. Resulting
values should be larger when a position is more conserved.</p>
</div></blockquote>
<p><strong>degenerate_mode</strong> : {&#8216;nan&#8217;, &#8216;error&#8217;}, optional</p>
<blockquote>
<div><p>Mode for handling positions with degenerate characters. If
<code class="docutils literal"><span class="pre">&quot;nan&quot;</span></code>, positions with degenerate characters will be assigned a
conservation score of <code class="docutils literal"><span class="pre">np.nan</span></code>. If <code class="docutils literal"><span class="pre">&quot;error&quot;</span></code>, an
error will be raised if one or more degenerate characters are
present.</p>
</div></blockquote>
<p><strong>gap_mode</strong> : {&#8216;nan&#8217;, &#8216;ignore&#8217;, &#8216;error&#8217;, &#8216;include&#8217;}, optional</p>
<blockquote>
<div><p>Mode for handling positions with gap characters. If <code class="docutils literal"><span class="pre">&quot;nan&quot;</span></code>,
positions with gaps will be assigned a conservation score of
<code class="docutils literal"><span class="pre">np.nan</span></code>. If <code class="docutils literal"><span class="pre">&quot;ignore&quot;</span></code>, positions with gaps will be filtered
to remove gaps before <code class="docutils literal"><span class="pre">metric</span></code> is applied. If <code class="docutils literal"><span class="pre">&quot;error&quot;</span></code>, an
error will be raised if one or more gap characters are present. If
<code class="docutils literal"><span class="pre">&quot;include&quot;</span></code>, conservation will be computed on alignment positions
with gaps included. In this case, it is up to the metric to ensure
that gaps are handled as they should be or to raise an error if
gaps are not supported by that metric.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">np.array of floats</p>
<blockquote>
<div><p>Values resulting from the application of <code class="docutils literal"><span class="pre">metric</span></code> to each
position in the alignment.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><p class="first"><strong>ValueError</strong></p>
<blockquote>
<div><p>If an unknown <code class="docutils literal"><span class="pre">metric</span></code>, <code class="docutils literal"><span class="pre">degenerate_mode</span></code> or <code class="docutils literal"><span class="pre">gap_mode</span></code> is
provided.</p>
</div></blockquote>
<p><strong>ValueError</strong></p>
<blockquote>
<div><p>If any degenerate characters are present in the alignment when
<code class="docutils literal"><span class="pre">degenerate_mode</span></code> is <code class="docutils literal"><span class="pre">&quot;error&quot;</span></code>.</p>
</div></blockquote>
<p><strong>ValueError</strong></p>
<blockquote class="last">
<div><p>If any gaps are present in the alignment when <code class="docutils literal"><span class="pre">gap_mode</span></code> is
<code class="docutils literal"><span class="pre">&quot;error&quot;</span></code>.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Users should be careful interpreting results when
<code class="docutils literal"><span class="pre">gap_mode</span> <span class="pre">=</span> <span class="pre">&quot;include&quot;</span></code> as the results may be misleading. For example,
as pointed out in <a class="reference internal" href="#r94" id="id1">[R94]</a>, a protein alignment position composed of 90%
gaps and 10% tryptophans would score as more highly conserved than a
position composed of alanine and glycine in equal frequencies with the
<code class="docutils literal"><span class="pre">&quot;inverse_shannon_uncertainty&quot;</span></code> metric.</p>
<p><code class="docutils literal"><span class="pre">gap_mode</span> <span class="pre">=</span> <span class="pre">&quot;include&quot;</span></code> will result in all gap characters being
recoded to <code class="docutils literal"><span class="pre">Alignment.dtype.default_gap_char</span></code>. Because no
conservation metrics that we are aware of consider different gap
characters differently (e.g., none of the metrics described in <a class="reference internal" href="#r94" id="id2">[R94]</a>),
they are all treated the same within this method.</p>
<p>The <code class="docutils literal"><span class="pre">inverse_shannon_uncertainty</span></code> metric is simiply one minus
Shannon&#8217;s uncertainty metric. This method uses the inverse of Shannon&#8217;s
uncertainty so that larger values imply higher conservation. Shannon&#8217;s
uncertainty is also referred to as Shannon&#8217;s entropy, but when making
computations from symbols, as is done here, &#8220;uncertainty&#8221; is the
preferred term (<a class="reference internal" href="#r95" id="id3">[R95]</a>).</p>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="r94" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[R94]</td><td><em>(<a class="fn-backref" href="#id1">1</a>, <a class="fn-backref" href="#id2">2</a>, <a class="fn-backref" href="#id4">3</a>)</em> Valdar WS. Scoring residue conservation. Proteins. (2002)</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="r95" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[R95]</td><td><em>(<a class="fn-backref" href="#id3">1</a>, <a class="fn-backref" href="#id5">2</a>)</em> Schneider T. Pitfalls in information theory (website, ca. 2015).
<a class="reference external" href="https://schneider.ncifcrf.gov/glossary.html#Shannon_entropy">https://schneider.ncifcrf.gov/glossary.html#Shannon_entropy</a></td></tr>
</tbody>
</table>
</dd></dl>

</div>


    </div>
      
  </div>
</div>
  
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2014--, scikit-bio development team.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4a1+.<br/>
    </p>
  </div>
</footer>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-6636235-9', 'scikit-bio.org');
    ga('send', 'pageview');
  </script>

  </body>
</html>